import{d as le,i as w,a7 as C,ax as K,ay as G,_ as W,r as c,o as n,c as v,b as e,q as u,p as f,h as a,l as m,k as d,a as t,F as B,n as R,S as ne,u as ie,e as $,f as J,I as de,m as l,a5 as ce,a9 as re,x as _e,ab as g,aB as ue,aC as P,aD as pe,aE as me,L as fe,A as he,E as ve,G as ke}from"./index.a683e63c.js";import{U as ge}from"./UseEloquentRouter.7e988003.js";import{U as ye}from"./UseDataTable.106f51b0.js";import{g as O,S as Q}from"./Task.26f018dd.js";import"https://cdn.jsdelivr.net/npm/surrealdb.js";const be=le({name:"TaskItem",props:{class:{type:String,default:"bg-white shadow rounded-lg p-4"},value:{type:Object}},methods:{viewPatient(){w.push("/patient/"+this.value.patient.id+"/edit")},edit(){w.push("/task/"+this.value.id+"/edit")},checkOutDate(s){if(!s)return!1;if(s.deadline_at)return C(s.deadline_at).isBefore(C())},getStatusTask:O},emits:["change","update:value"],setup(s,{emit:y,attrs:T}){return s.value.created_at=C(s.value.created_at).format("HH:mm MM-DD-YYYY"),{value:s.value,class:s.class}},components:{CheckCircleOutlined:K,ClockCircleOutlined:G,SyncOutlined:Q}}),xe={class:"flex items-center justify-between"},we={class:"my-2"},Ce={class:"text-base font-medium text-gray-700 dark:text-slate-400"},Ye={class:"space-x-3"},De={key:0,class:"mb-2 text-nowrap"},Se={key:0,class:"mt-5"},Me=["src"];function $e(s,y,T,E,N,F){var k;const A=c("CheckCircleOutlined"),U=c("SyncOutlined"),Y=c("ClockCircleOutlined"),D=c("a-tag"),b=c("a-tooltip"),i=c("a-avatar-group");return n(),v("div",null,[e("div",{class:ne(s.class)},[e("div",xe,[e("small",null,u(s.value.created_at),1),s.getStatusTask(s.value.task_process)?(n(),f(D,{key:0,color:s.getStatusTask(s.value.task_process).color},{icon:a(()=>[s.value.task_process===3?(n(),f(A,{key:0})):m("",!0),s.value.task_process===1?(n(),f(U,{key:1,spin:!0})):m("",!0),[null,0].includes(s.value.task_process)?(n(),f(Y,{key:2})):m("",!0)]),default:a(()=>[d(" "+u(s.getStatusTask(s.value.task_process).label),1)]),_:1},8,["color"])):m("",!0)]),e("h5",we,[e("span",Ce,u(s.value.name),1)]),e("p",Ye,[s.value.patient?(n(),v("span",De,[e("a",{onClick:y[0]||(y[0]=(..._)=>s.viewPatient&&s.viewPatient(..._)),class:"cursor-pointer"},u(s.value.patient.full_name),1)])):m("",!0)]),(k=s.value.assignees)!=null&&k.length?(n(),v("div",Se,[t(i,{"max-count":3,"max-style":{color:"#f56a00",backgroundColor:"#fde3cf"}},{default:a(()=>[(n(!0),v(B,null,R(s.value.assignees,_=>(n(),f(b,{key:_,title:_.full_name,placement:"top"},{default:a(()=>[e("img",{class:"relative w-8 h-8 border border-white rounded-full -me-1 hover:z-10",src:_==null?void 0:_.profile_photo_url,alt:"user photo"},null,8,Me)]),_:2},1032,["title"]))),128))]),_:1})])):m("",!0)],2)])}const Oe=W(be,[["render",$e]]);const p=s=>(ve("data-v-18871800"),s=s(),ke(),s),Te={class:"taskList"},Ae={class:"overflow-hidden mt-5"},Ue={class:"flex pb-4 -mx-2"},Ie={class:"mb-2 text-lg font-semibold uppercase"},Ve={class:"flex flex-col h-[calc(100vh-285px)] gap-4 pl-1 pr-4 overflow-x-hidden overflow-y-auto kanban-board"},je={class:"detail"},Pe={class:"mb-4"},Le=p(()=>e("h5",{class:""},"Description:",-1)),Be={class:"text-gray-400"},Re={class:"my-5"},Ee={class:"grid gap-3 sm:grid-cols-3"},Ne={class:"col-span-1"},Fe=p(()=>e("p",{class:"text-gray-400"},"Assigned To",-1)),ze={class:"space-y-1"},qe=["src"],He={class:"ml-1"},Je={class:"font-medium"},Ke={class:"col-span-1"},Ge=p(()=>e("p",{class:"text-gray-400"},"Patient",-1)),We={class:"flex items-center gap-3 mt-1"},Qe={class:""},Xe={class:"font-medium"},Ze={class:"text-xs text-stone-400"},et={class:"col-span-1"},tt=p(()=>e("p",{class:"text-gray-400"},"Due Date",-1)),st={class:"flex items-center gap-3 mt-1"},at={class:"ml-1"},ot={class:"font-medium"},lt={class:"comment"},nt={class:""},it={class:"mt-4"},dt={class:"flex gap-2"},ct={class:"w-full"},rt=p(()=>e("h5",{class:"mb-2 font-semibold"},[d("Jeremy Tomlinson "),e("small",{class:"float-right"},"5 hours ago")],-1)),_t=p(()=>e("p",null,"Nice work, makes me think of The Money Pit.",-1)),ut={href:"javascript: void(0);",class:"flex items-center mt-2 text-xs font-light !text-stone-500"},pt={class:"mt-4"},mt={class:"flex gap-2"},ft={class:"w-full"},ht=p(()=>e("h5",{class:"mb-2 font-semibold"},[d("Thelma Fridley "),e("small",{class:"float-right"},"3 hours ago")],-1)),vt=p(()=>e("p",null,"i'm in the middle of a timelapse animation myself! (Very different though.) Awesome stuff. ",-1)),kt={href:"javascript: void(0);",class:"flex items-center mt-2 text-xs font-light !text-stone-500"},gt={class:"mt-4"},yt={class:"flex gap-2"},bt={class:"w-full"},xt=p(()=>e("h5",{class:"mb-2 font-semibold"},[d("Kevin Martinez "),e("small",{class:"float-right"},"1 day ago")],-1)),wt=p(()=>e("p",null,"It would be very nice to have.",-1)),Ct={href:"javascript: void(0);",class:"flex items-center mt-2 text-xs font-light !text-stone-500"},Yt={class:"border mt-7"},Dt=p(()=>e("textarea",{rows:"3",class:"w-full border-0 focus:outline-0 focus:border-0 focus:ring-0",placeholder:"Your comment..."},null,-1)),St={class:"flex items-center justify-between px-3 py-2 bg-gray-50"},Mt={href:"#",class:"inline-block px-1 hover:bg-light hover:text-slate-900"},$t={href:"#",class:"inline-block px-1 hover:bg-light hover:text-slate-900"},L="task",Ot={__name:"index",setup(s){const y=ie(),{fetchListApi:T}=ge(L),E=[{label:"Edit",key:"edit",show:()=>!0,action:h=>{w.replace(L+"/"+h.id+"/edit")}}],N=[{label:"Add",permission:y.hasPermission("task.assign"),action:()=>{w.replace(L+"/new")}}],F=[],A=$([{name:"ToDo",key:"todo",task_process:0,tasks:[]},{name:"Working",key:"working",task_process:1,tasks:[]},{name:"Review",key:"review",task_process:2,tasks:[]},{name:"Done",key:"done",task_process:3,tasks:[]}]),U={animation:200,disabled:!1,ghostClass:"ghost",group:"tasks",sort:!1},Y=C().format("YYYY-MM-DD"),D=C().add(7,"day").format("YYYY-MM-DD"),b=$(!1),i=J({}),k=J({from_date:Y,to_date:D}),_=$({from_date:Y,to_date:D}),X=$(!1),Z=function(h){const r=h.draggedContext.element;return he.put("/task/"+r.id,{task_process:h.to.dataset.status}),r.task_process=parseInt(h.to.dataset.status),!0};ye(T,{columns:F,showSelection:!0,showSort:!1,listActions:N,itemActions:E});function ee(){Object.assign(k,_.value)}return(h,r)=>{const z=c("a-date-picker"),I=c("a-form-item"),S=c("a-button"),q=c("a-form"),te=c("a-row"),se=c("a-tag"),M=c("a-avatar-group"),H=c("a-divider"),V=c("a-avatar"),ae=c("a-modal"),oe=c("router-view");return n(),f(de,null,{default:a(()=>[t(fe,null,{default:a(()=>[e("div",Te,[t(te,null,{default:a(()=>[t(q,{model:k,layout:"inline"},{default:a(()=>[t(I,{label:"From Date"},{default:a(()=>[t(z,{value:_.value.from_date,"onUpdate:value":r[0]||(r[0]=o=>_.value.from_date=o),class:"w-full","value-format":"YYYY-MM-DD",format:"MM-DD-YYYY"},null,8,["value"])]),_:1}),t(I,{label:"To Date"},{default:a(()=>[t(z,{value:_.value.to_date,"onUpdate:value":r[1]||(r[1]=o=>_.value.to_date=o),class:"w-full","value-format":"YYYY-MM-DD",format:"MM-DD-YYYY"},null,8,["value"])]),_:1}),t(I,null,{default:a(()=>[t(S,{type:"primary",onClick:ee},{default:a(()=>[d("Search")]),_:1}),t(S,{style:{"margin-left":"10px"}},{default:a(()=>[d("Clear")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e("div",Ae,[e("div",Ue,[(n(!0),v(B,null,R(A.value,o=>(n(),v("div",{key:o.key,class:"w-full px-2 md:w-1/2 lg:w-1/4"},[t(l(ce),{params:k,onChange:j=>{o.tasks=j},url:"/task/all?filter[task_process]="+o.task_process,class:"flex flex-col p-4 border border-gray-200 rounded-lg inner"},{default:a(({data:j})=>[e("h2",Ie,u(o.key)+" ("+u(j.length)+")",1),e("div",Ve,[t(l(re),_e(U,{modelValue:o.tasks,"onUpdate:modelValue":x=>o.tasks=x,group:{name:"task-list"},class:"dragArea","data-status":o.task_process,"item-key":o.key,move:x=>Z(x,o)}),{item:a(({element:x})=>[t(Oe,{value:x,class:"p-4 mb-2 bg-white rounded-md shadow-md"},null,8,["value"])]),_:2},1040,["modelValue","onUpdate:modelValue","data-status","item-key","move"])])]),_:2},1032,["params","onChange","url"])]))),128))])])]),t(ae,{open:b.value,"onUpdate:open":r[5]||(r[5]=o=>b.value=o),"append-to-body":"",title:i.name,width:"1000px","confirm-loading":X.value},{footer:a(()=>[t(S,{key:"submit",type:"primary",onClick:r[4]||(r[4]=()=>{b.value=!1})},{default:a(()=>[d("Ok ")]),_:1})]),default:a(()=>[e("div",je,[e("div",Pe,[l(O)(i.task_process)?(n(),f(se,{key:0,color:l(O)(i.task_process).color},{icon:a(()=>[i.task_process===3?(n(),f(l(K),{key:0})):m("",!0),i.task_process===1?(n(),f(l(Q),{key:1,spin:!0})):m("",!0),[null,0].includes(i.task_process)?(n(),f(l(G),{key:2})):m("",!0)]),default:a(()=>[d(" "+u(l(O)(i.task_process).label),1)]),_:1},8,["color"])):m("",!0)]),Le,e("div",Be,u(i.description),1),e("div",Re,[e("div",Ee,[e("div",Ne,[Fe,e("div",ze,[(n(!0),v(B,null,R(i.assignees,o=>(n(),v("div",{key:o.id,class:"flex items-center item-assignee"},[t(M,null,{default:a(()=>[e("img",{class:"w-8 h-8 rounded-full",src:o==null?void 0:o.profile_photo_url,alt:"user photo"},null,8,qe)]),_:2},1024),e("div",He,[e("h5",Je,u(o.full_name),1)])]))),128))])]),e("div",Ke,[Ge,e("div",We,[e("div",Qe,[e("h5",Xe,[e("a",{onClick:r[2]||(r[2]=o=>l(w).replace("/patient/"+i.patient.id+"/edit"))},"[#"+u(i.patient.unify_number)+"] "+u(i.patient.full_name),1)]),e("p",Ze,u(h.age(i.patient.dob)),1)])])]),e("div",et,[tt,e("div",st,[t(l(g),{path:l(ue)},null,8,["path"]),e("div",at,[e("h5",ot,u(i.deadline_at),1)])])])])])]),e("div",lt,[t(H,{class:"!font-bold !text-blue-700",dashed:"",orientation:"left","orientation-margin":"0",plain:""},{default:a(()=>[d("Logs ")]),_:1}),t(q,null,{default:a(()=>[t(H,{class:"!font-bold !text-blue-700",dashed:"",orientation:"left","orientation-margin":"0",plain:""},{default:a(()=>[d("Comments ")]),_:1}),e("div",nt,[e("div",it,[e("div",dt,[t(M,null,{default:a(()=>[t(V,{style:{"background-color":"blue"}},{default:a(()=>[d("J")]),_:1})]),_:1}),e("div",ct,[rt,_t,e("a",ut,[t(l(g),{path:l(P),class:"inline-block !text-current"},null,8,["path"]),d(" Reply ")]),e("div",pt,[e("div",mt,[t(M,null,{default:a(()=>[t(V,{style:{"background-color":"yellow",color:"#333"}},{default:a(()=>[d("T")]),_:1})]),_:1}),e("div",ft,[ht,vt,e("a",kt,[t(l(g),{path:l(P),class:"inline-block !text-current"},null,8,["path"]),d(" Reply ")])])])])])])]),e("div",gt,[e("div",yt,[t(M,null,{default:a(()=>[t(V,{style:{"background-color":"orange"}},{default:a(()=>[d("K")]),_:1})]),_:1}),e("div",bt,[xt,wt,e("a",Ct,[t(l(g),{path:l(P),class:"inline-block !text-current"},null,8,["path"]),d(" Reply ")])])])])]),e("div",Yt,[Dt,e("div",St,[e("div",null,[e("a",Mt,[t(l(g),{path:l(pe)},null,8,["path"])]),e("a",$t,[t(l(g),{path:l(me)},null,8,["path"])])]),t(S,{onClick:r[3]||(r[3]=o=>h.submitComment(i.id)),type:"primary",class:"uppercase"},{default:a(()=>[d("Send")]),_:1})])])]),_:1})])]),_:1},8,["open","title","confirm-loading"]),t(oe)]),_:1})]),_:1})}}},jt=W(Ot,[["__scopeId","data-v-18871800"]]);export{jt as default};
