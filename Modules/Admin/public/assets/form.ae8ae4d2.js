import{d as R,e as v,f as A,r as n,p as d,h as o,i as g,o as p,a as t,m as B,ah as D,k as y,b as O,x as $}from"./index.a683e63c.js";import{U as j}from"./UseEloquentRouter.7e988003.js";import"https://cdn.jsdelivr.net/npm/surrealdb.js";const L={style:{height:"calc(100% - 70px)","margin-top":"15px",overflow:"auto",padding:"0"},gutter:20},h="permissions",G=R({__name:"form",emits:["close"],setup(S,{emit:E}){const b="/master-data/"+h,{fetchDetailApi:k,createApi:x}=j(h),l=v(!1),f=v(),a=A({name:"",status:"active",description:""});(async function(){var e;l.value=!0;var r=(e=g.currentRoute)==null?void 0:e.value.params.id;if(r!=="new"){l.value=!0;const i=await k(r);Object.assign(a,i.data),l.value=!1}else l.value=!1})();const u=()=>{f.value.validate().then(()=>{x({...a}).then(r=>{Object.assign(a,r.data.result)})})},m=function(){g.replace({path:b})};return(r,e)=>{const i=n("a-button"),w=n("a-space"),_=n("a-card"),C=n("a-input"),c=n("a-form-item"),U=n("a-textarea"),N=n("a-switch"),V=n("a-form"),q=n("a-drawer");return p(),d(q,{"body-style":"padding:0",closable:!1,style:{position:"relative",display:"flex","flex-direction":"column",height:"100vh"},onClose:m,open:!0,width:"500px"},{default:o(()=>[t(V,$({class:"w-full h-full bg-gray-100 !p-5",layout:"vertical"},r.$config.formConfig,{ref_key:"formRef",ref:f,model:a,onFinish:u}),{default:o(()=>[t(_,{"body-style":"padding:10px;height:55px;",class:"bg-gray-50"},{default:o(()=>[t(i,{class:"float-left",type:"link",onClick:m},{icon:o(()=>[t(B(D))]),_:1}),t(w,{class:"float-right",align:"right"},{default:o(()=>[a.id?(p(),d(i,{key:1,onClick:e[1]||(e[1]=s=>u()),loading:l.value,type:"primary",class:"!bg-yellow-400"},{default:o(()=>[y("Update")]),_:1},8,["loading"])):(p(),d(i,{key:0,onClick:e[0]||(e[0]=s=>u()),loading:l.value,type:"primary"},{default:o(()=>[y("Create")]),_:1},8,["loading"]))]),_:1})]),_:1}),O("div",L,[t(_,null,{default:o(()=>[t(c,{label:"Name",name:"name",rules:[{required:!0}]},{default:o(()=>[t(C,{value:a.name,"onUpdate:value":e[2]||(e[2]=s=>a.name=s),placeholder:"Name.."},null,8,["value"])]),_:1}),t(c,{label:"Description",name:"description",min:0,rules:[{required:!0}]},{default:o(()=>[t(U,{rows:"5",value:a.description,"onUpdate:value":e[3]||(e[3]=s=>a.description=s)},null,8,["value"])]),_:1}),t(c,{label:"Status",name:"status",rules:[{required:!0}]},{default:o(()=>[t(N,{checkedValue:"active",unCheckedValue:"inactive",checked:a.status,"onUpdate:checked":e[4]||(e[4]=s=>a.status=s)},null,8,["checked"])]),_:1})]),_:1})])]),_:1},16,["model"])]),_:1})}}});export{G as default};
