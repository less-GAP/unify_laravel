import{_ as H}from"./no_image_available.915c4da6.js";import{d as W,a3 as de,X,a4 as ie,a5 as J,e as c,a6 as pe,t as Q,_ as ce,r as o,o as r,p as P,h as t,b as y,a as e,c as p,F as b,n as B,x as K,k as v,q as D,u as me,I as _e,i as L,A as V,L as fe,l as x,m as S,a7 as ve,H as j,W as ye}from"./index.a683e63c.js";import{U as ke}from"./UseEloquentRouter.7e988003.js";/* empty css              */import{I as be}from"./InputUploadGetPath.6754ab8e.js";import{R as ge}from"./RemoteSelect.5cb10285.js";import{F as he}from"./FormOutlined.646d2a07.js";const xe=W({components:{DragOutlined:de,DeleteOutlined:X,PlusOutlined:ie,ApiData:J,RemoteSelect:ge},props:{value:Array},emits:["select","close"],setup(i,{emit:d}){c(!1);const Y=c(!1),g=c(),m=c({product:{},trademark:{}});c([]);function A(){d("close")}function l(){g.value.validate().then(()=>{d("select",Q(m.value))})}function w(k,_){m.value.product=_}function C(k,_){m.value.trademark=_}return pe(()=>{m.value=i.value}),{loading:Y,formRef:g,back:A,formState:m,submit:l,changeProduct:w,changeTrademark:C}}});const we={class:"my-4"},Se=["src"],De=["src"],Pe={class:"py-4 flex justify-end"};function Ye(i,d,Y,g,m,A){const l=o("a-select-option"),w=o("a-select"),C=o("ApiData"),k=o("a-form-item"),_=o("a-col"),E=o("a-date-picker"),F=o("a-input-number"),T=o("a-row"),I=o("a-button"),q=o("a-form");return r(),P(q,{layout:"vertical",ref:"formRef",model:i.formState,onFinish:i.submit,class:"w-full"},{default:t(()=>[y("div",we,[e(T,{gutter:20},{default:t(()=>[e(_,{span:24},{default:t(()=>[e(k,{label:"Product",name:"product_id",rules:[{required:!0,message:"Please input !"}]},{default:t(()=>[e(C,{url:"product/all",method:"GET",params:{}},{default:t(({data:n})=>[e(w,{class:"w-[200px]",value:i.formState.product_id,"onUpdate:value":d[0]||(d[0]=a=>i.formState.product_id=a),placeholder:"Select product...","option-label-prop":"children",onChange:i.changeProduct},{default:t(()=>[(r(!0),p(b,null,B(n,(a,f)=>(r(),P(l,K({key:f,value:a.id,label:a.name},a),{default:t(()=>[y("img",{src:a.image_url,class:"w-5 h-5 inline-block"},null,8,Se),v("\xA0\xA0\xA0\xA0"+D(a.name),1)]),_:2},1040,["value","label"]))),128))]),_:2},1032,["value","onChange"])]),_:1})]),_:1}),e(k,{label:"Trademark",name:"trademark_id",rules:[{required:!0,message:"Please input !"}]},{default:t(()=>[e(C,{url:"trademark/all",method:"GET",params:{}},{default:t(({data:n})=>[e(w,{class:"w-[200px]",value:i.formState.trademark_id,"onUpdate:value":d[1]||(d[1]=a=>i.formState.trademark_id=a),placeholder:"Select product...","option-label-prop":"children",onChange:i.changeTrademark},{default:t(()=>[(r(!0),p(b,null,B(n,(a,f)=>(r(),P(l,K({key:f,value:a.id,label:a.name},a),{default:t(()=>[y("img",{src:a.image_url,class:"w-5 h-5 inline-block"},null,8,De),v("\xA0\xA0\xA0\xA0"+D(a.name),1)]),_:2},1040,["value","label"]))),128))]),_:2},1032,["value","onChange"])]),_:1})]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(k,{label:"Expiration Date",name:"expiration_date",rules:[{required:!0,message:"Please input !"}]},{default:t(()=>[e(E,{value:i.formState.expiration_date,"onUpdate:value":d[2]||(d[2]=n=>i.formState.expiration_date=n),"input-read-only":"","value-format":"YYYY-MM-DD",format:"MM-DD-YYYY",class:"w-full"},null,8,["value"])]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(k,{label:"Amount",name:"amount",rules:[{required:!0,message:"Please input !"}]},{default:t(()=>[e(F,{id:"inputNumber",value:i.formState.amount,"onUpdate:value":d[3]||(d[3]=n=>i.formState.amount=n),min:0,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),y("div",Pe,[e(I,{type:"primary","html-type":"submit"},{default:t(()=>[v("Submit")]),_:1}),e(I,{type:"primary",ghost:"",onClick:d[4]||(d[4]=n=>i.back()),class:"ml-4"},{default:t(()=>[v("Back")]),_:1})])])]),_:1},8,["model","onFinish"])}const Ae=ce(xe,[["render",Ye]]),Ce={class:"mx-4"},Ue=["src"],$e={class:"flex flex-row justify-end"},Me={class:"mt-5"},Ie={key:0,class:"flex flex-row items-center"},qe=["src","alt"],Re={key:1,class:"w-20 h-auto float-left",src:H},Ee={class:"ml-4 font-semibold"},Fe={key:0,class:"flex flex-row items-center"},Te=["src","alt"],Ne={key:1,class:"w-20 h-auto float-left",src:H},Be={class:"ml-4 font-semibold"},R="inventory",He=W({__name:"Detail",setup(i){me(),ke(R);const d=c(!1),Y=c("1");c(!1);const g=c(!1),m=c(!1),A=c(),l=c({type:"in",products:[]}),w=c([{title:"#",dataIndex:"id",key:"id",width:50,render:(n,a,f)=>(++f,f)},{title:"Product",dataIndex:"product_id",key:"product_id"},{title:"Trademark",dataIndex:"trademark_id",key:"trademark_id"},{title:"Amount",dataIndex:"amount",key:"amount",className:"text-center",width:100},{title:"Expiration Date",dataIndex:"expiration_date",key:"expiration_date",width:150},{title:"Action",dataIndex:"action",key:"action",width:100}]);(function(){d.value=!0;var n=L.currentRoute.value.params.id;n>0?(d.value=!0,V.get(R+"/"+n).then(a=>{l.value=a.data.data,d.value=!1})):d.value=!1})();const k=()=>{A.value.validate().then(()=>{V.post(R,Q(l.value)).then(n=>{n.data.code==1&&q()})})},_=c({}),E=n=>{n.id?l.value.products.forEach((a,f)=>{a.id==n.id&&(l.value.products[f]=n)}):(n.id=l.value.products.length+1,l.value.products.push(n)),m.value=!1},F=()=>{_.value={},m.value=!0},T=n=>{_.value=n,m.value=!0},I=n=>{l.value.products.forEach((a,f)=>{a.id==n.id&&l.value.products.splice(f,1)})},q=()=>{L.push("/"+R)};return(n,a)=>{const f=o("a-textarea"),h=o("a-form-item"),U=o("a-col"),$=o("a-row"),G=o("a-radio-button"),Z=o("a-radio-group"),ee=o("a-date-picker"),te=o("a-input"),ae=o("a-select-option"),le=o("a-select"),O=o("a-tab-pane"),M=o("a-button"),oe=o("a-popconfirm"),ne=o("a-table"),ue=o("a-tabs"),se=o("a-space"),re=o("a-form"),z=o("a-modal");return r(),p(b,null,[e(_e,null,{default:t(()=>[e(fe,null,{default:t(()=>[e(re,{layout:"vertical",ref_key:"formRef",ref:A,model:l.value,onFinish:k,class:"w-full"},{default:t(()=>[y("div",Ce,[e(ue,{activeKey:Y.value,"onUpdate:activeKey":a[7]||(a[7]=u=>Y.value=u),onChange:n.tabActive},{default:t(()=>[e(O,{key:"1",tab:"General"},{default:t(()=>[e($,{gutter:20},{default:t(()=>[e(U,{span:24},{default:t(()=>[l.value.id>0?(r(),P(h,{key:0,label:"Note for this change",name:"log_detail",rules:[{required:!0,message:"Please enter note!"}]},{default:t(()=>[e(f,{class:"!rounded-none w-full",value:l.value.log_detail,"onUpdate:value":a[0]||(a[0]=u=>l.value.log_detail=u),placeholder:"Make a note of any changes you make to the doctor record","auto-size":{minRows:2,maxRows:10}},null,8,["value"])]),_:1})):x("",!0)]),_:1})]),_:1}),e($,{gutter:20},{default:t(()=>[e(U,{span:24},{default:t(()=>[e(h,{label:"Type",name:"type",rules:[{required:!0,message:"Select a type!"}]},{default:t(()=>[e(Z,{value:l.value.type,"onUpdate:value":a[1]||(a[1]=u=>l.value.type=u),"button-style":"solid",size:"middle"},{default:t(()=>[e(G,{value:"in"},{default:t(()=>[v("In")]),_:1}),e(G,{value:"out"},{default:t(()=>[v("Out")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),e($,{gutter:20},{default:t(()=>[e(U,{span:12},{default:t(()=>[e(h,{label:"Date",name:"date",rules:[{required:!0,message:"Please input !"}]},{default:t(()=>[e(ee,{value:l.value.date,"onUpdate:value":a[2]||(a[2]=u=>l.value.date=u),"input-read-only":"","value-format":"YYYY-MM-DD",format:"MM-DD-YYYY",class:"w-[150px]"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e($,{gutter:20},{default:t(()=>[e(U,{span:12},{default:t(()=>[e(h,{label:"Code",name:"code",rules:[{required:!0,message:"Please input !"}]},{default:t(()=>[e(te,{value:l.value.code,"onUpdate:value":a[3]||(a[3]=u=>l.value.code=u),placeholder:"Code..."},null,8,["value"])]),_:1}),e(h,{label:"Supplier",name:"supplier_id",rules:[{required:!0,message:"Please input !"}]},{default:t(()=>[e(S(J),{url:"supplier/all",method:"GET",params:{}},{default:t(({data:u})=>[e(le,{class:"w-[200px]",value:l.value.supplier_id,"onUpdate:value":a[4]||(a[4]=s=>l.value.supplier_id=s),placeholder:"Select product...","option-label-prop":"children"},{default:t(()=>[(r(!0),p(b,null,B(u,(s,N)=>(r(),P(ae,{key:N,value:s.id,label:s.name},{default:t(()=>[y("img",{src:s.image_url,class:"w-5 h-5 inline-block"},null,8,Ue),v("\xA0\xA0\xA0\xA0"+D(s.name),1)]),_:2},1032,["value","label"]))),128))]),_:2},1032,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),e($,{gutter:20},{default:t(()=>[e(U,{span:24},{default:t(()=>[e(h,{style:{width:"100%"},label:"File"},{default:t(()=>[e(S(be),{autocomplete:"off",value:l.value.file,"onUpdate:value":a[5]||(a[5]=u=>l.value.file=u),accept:"application/pdf"},null,8,["value"])]),_:1}),e(h,{label:"Description"},{default:t(()=>[e(f,{value:l.value.description,"onUpdate:value":a[6]||(a[6]=u=>l.value.description=u),placeholder:"Description...",rows:4},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),e(O,{key:"2",tab:"Products"},{default:t(()=>[y("div",$e,[e(M,{onClick:F},{default:t(()=>[v("Add Product")]),_:1})]),y("div",Me,[e(ne,{"data-source":l.value.products,columns:w.value,bordered:"",pagination:!1,triped:""},{bodyCell:t(({column:u,record:s})=>[u.key==="product_id"?(r(),p(b,{key:0},[s.product?(r(),p("div",Ie,[s.product.image_url?(r(),p("img",{key:0,class:"w-20 h-auto float-left",src:s.product.image_url,alt:s.product.name},null,8,qe)):(r(),p("img",Re)),y("label",Ee,D(s.product.name),1)])):x("",!0)],64)):x("",!0),u.key==="trademark_id"?(r(),p(b,{key:1},[s.trademark?(r(),p("div",Fe,[s.trademark.image_url?(r(),p("img",{key:0,class:"w-20 h-auto float-left",src:s.trademark.image_url,alt:s.trademark.name},null,8,Te)):(r(),p("img",Ne)),y("label",Be,D(s.trademark.name),1)])):x("",!0)],64)):x("",!0),u.key==="expiration_date"?(r(),p(b,{key:2},[v(D(S(ve)(s.expiration_date,"YYYY-MM-DD").format("MM-DD-YYYY")),1)],64)):x("",!0),u.key==="action"?(r(),p(b,{key:3},[e(M,{type:"text",icon:j(S(he)),label:"",outline:!0,onClick:N=>T(s)},null,8,["icon","onClick"]),e(oe,{title:"Do you want delete this?","ok-text":"Yes","cancel-text":"No",onConfirm:N=>I(s)},{default:t(()=>[e(M,{type:"text",danger:"",icon:j(S(X)),label:"",outline:!0},null,8,["icon"])]),_:2},1032,["onConfirm"])],64)):x("",!0)]),_:1},8,["data-source","columns"])])]),_:1})]),_:1},8,["activeKey","onChange"]),e(se,{align:"center",class:"pt-5"},{default:t(()=>[e(M,{type:"primary","html-type":"submit"},{default:t(()=>[v("Submit")]),_:1}),e(M,{type:"primary",ghost:"",onClick:a[8]||(a[8]=u=>q())},{default:t(()=>[v("Back")]),_:1})]),_:1})])]),_:1},8,["model"])]),_:1})]),_:1}),e(z,{"append-to-body":"",open:g.value,"onUpdate:open":a[10]||(a[10]=u=>g.value=u),style:{"z-index":"99999",top:"2vh",height:"98vh"},height:"96vh",width:"90vw",title:"Select file"},{footer:t(()=>[]),default:t(()=>[e(S(ye),{multiple:!0,onClose:a[9]||(a[9]=u=>g.value=!1),onSelect:n.onSelectImage},null,8,["onSelect"])]),_:1},8,["open"]),e(z,{"append-to-body":"",open:m.value,"onUpdate:open":a[12]||(a[12]=u=>m.value=u),zIndex:10,width:"40%",title:"Select Product",closable:!0,footer:null,maskClosable:!1},{default:t(()=>[(r(),P(Ae,{value:_.value,onClose:a[11]||(a[11]=u=>m.value=!1),onSelect:E,key:_.value.id?_.value:0},null,8,["value"]))]),_:1},8,["open"])],64)}}});export{He as _};
