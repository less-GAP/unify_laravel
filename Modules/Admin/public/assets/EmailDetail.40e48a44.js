import{e as y,f as w,i as k,r as l,p as o,h as e,A as q,o as n,b as r,a,q as s,l as c,k as u,m as A,a5 as j}from"./index.a683e63c.js";/* empty css              */import"./jodit.min.b5f3759b.js";import"https://cdn.jsdelivr.net/npm/surrealdb.js";const E={class:"p-5"},O=["srcdoc"],L="email/history",J={__name:"EmailDetail",props:{value:Object},emits:["success","cancel"],setup(C,{emit:R}){const x=C,$="/"+L,D={required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},d=y(!1);y(null);const f=w(x.value||{isNew:!0,full_name:"",username:"",email:"",role:"user",password:""}),b=k.currentRoute.value.params.id;w({validateTrigger:"submit","label-align":"top",model:f,labelCol:{span:24},wrapperCol:{span:24},"validate-messages":D}),b&&function(_){d.value=!0,q.get("email-template/"+_).then(m=>{Object.assign(f,m.data)}).catch(m=>{}).finally(d.value=!1)}(b);const M=function(){k.replace({path:$})};return(_,m)=>{const i=l("a-descriptions-item"),p=l("a-tag"),N=l("prev"),B=l("a-descriptions"),v=l("a-col"),g=l("a-card"),h=l("a-tab-pane"),S=l("a-tabs"),T=l("a-row"),V=l("a-drawer");return n(),o(V,{"body-style":"padding:0",closable:!1,style:{position:"relative",display:"flex","flex-direction":"column",height:"100vh"},onClose:M,open:!0,width:"80vw"},{default:e(()=>[r("div",E,[a(A(j),{url:"email/"+_.$route.params.id},{default:e(({data:t})=>[a(T,{gutter:20},{default:e(()=>[a(v,{span:10},{default:e(()=>[a(B,{column:1,title:"Email Detai"},{default:e(()=>[a(i,{label:"Mail Title"},{default:e(()=>[r("b",null,s(t.email_title),1)]),_:2},1024),a(i,{label:"Mail To"},{default:e(()=>[r("b",null,s(t.email_to),1)]),_:2},1024),t.email_cc?(n(),o(i,{key:0,label:"Mail CC"},{default:e(()=>[r("b",null,s(t.email_cc),1)]),_:2},1024)):c("",!0),t.email_bcc?(n(),o(i,{key:1,label:"Mail BCC"},{default:e(()=>[r("b",null,s(t.email_bcc),1)]),_:2},1024)):c("",!0),a(i,{label:"Status"},{default:e(()=>[t.status=="waiting"?(n(),o(p,{key:0,color:"warning"},{default:e(()=>[u(s(t.status),1)]),_:2},1024)):c("",!0),t.status=="success"?(n(),o(p,{key:1,color:"success"},{default:e(()=>[u(s(t.status),1)]),_:2},1024)):c("",!0),t.status=="error"?(n(),o(p,{key:2,color:"red"},{default:e(()=>[u(s(t.status),1)]),_:2},1024)):c("",!0)]),_:2},1024),t.status=="error"?(n(),o(i,{key:2,label:"Status"},{default:e(()=>[a(N,null,{default:e(()=>[u(s(t.email_response),1)]),_:2},1024)]),_:2},1024)):c("",!0)]),_:2},1024)]),_:2},1024),a(v,{span:14},{default:e(()=>[a(S,null,{default:e(()=>[a(h,{key:"1",tab:"Content"},{default:e(()=>[a(g,{bordered:""},{default:e(()=>[r("iframe",{class:"w-full h-[80vh]",srcdoc:t.email_content,frameborder:"0"},null,8,O)]),_:2},1024)]),_:2},1024),a(h,{key:"2",tab:"Data","force-render":""},{default:e(()=>[a(g,null,{default:e(()=>[r("pre",null,s(t.email_data),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["url"])])]),_:1})}}};export{J as default};
