import{_ as se,M as re,e as S,v as ie,r as c,o as e,c as n,K as $,N as B,O as z,b as g,a as m,h as d,p as f,y as ue,l as u,m as de,R as ce,F as h,n as _,k as w,q as C,P as T,Q as E,S as K,x as I,C as fe,t as ye}from"./index.a683e63c.js";const ge={id:"table-list",class:"flex flex-col sm:rounded-lg"},he=["loading"],pe={class:"flex-1 w-full my-2 overflow-auto bg-white rounded-lg shadow scroll-smooth"},ve={key:0,class:"w-full table-auto"},ke={class:"text-xs font-semibold text-white uppercase bg-gray-700"},be={key:0,width:"30",scope:"col",class:"p-2 whitespace-nowrap"},me={class:"w-full py-4 ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"},we=["width"],Ce={class:"font-semibold text-left"},xe=["width"],Se={class:"text-sm divide-y divide-gray-100"},_e={key:0,class:"p-2 whitespace-nowrap"},Ae=["for"],Pe=["id","value"],$e=["data-label"],Be={key:1,class:"p-2 whitespace-nowrap text-center"},De={key:0},Oe={key:1},ze={__name:"DataTable",props:{tableConfig:{type:Object,default:{}},pagination:{type:Object,default:{page:1,total:0,perPage:20}},showSizeChanger:{type:Boolean,default:!0},versionKey:{type:String,default:null},showReload:{type:Boolean,default:!1},showSelection:{type:Boolean,default:!0},globalSearch:{type:Boolean,default:!0},showSort:{type:[Boolean,Array],default:!1},showPagination:{type:[Boolean],default:!0},params:{type:Object,default:{}},sort:{type:String,default:"-id"},filter:{type:Object,default:{}},columns:Array,selectionActions:{type:Array,default:[]},itemActions:{type:Array,default:[]},listActions:{type:Array,default:[]},api:Function,addAction:Object},emits:["register"],setup(t,{emit:q}){const y=t,Q=re(),x={item_key:"id",rowSelect:!0,globalSearch:!0,...y.tableConfig},N=S({}),v=S(null),k=S({search:"",...y.filter}),R=S(y.sort);function G(){let s={};for(let a in k.value)s["filter["+a+"]"]=k.value[a];return s}function r(s=!1){y.api&&(s&&(D.value=!0),y.api({perPage:y.pagination.perPage,sort:R.value,page:y.pagination.page,...y.params,...G()}).then(a=>{var A,p;(A=a.data)!=null&&A.total?(N.value=a.data,v.value=a.data.data,y.pagination.total=(p=a.data)!=null&&p.total?a.data.total:0):v.value=a.data}).finally(()=>{O.value=!1,s&&(D.value=!1)}))}q("register",{reload:r,filter:k});const D=S(!1),O=S(!1),b=S([]);function H(){O.value?b.value=ye(v.value||[]):b.value=[]}async function J(s){const a=b.value.map(A=>A[x.item_key]);await s.action(a,b.value),s.complete&&s.complete(),b.value=[],r()}return ie(()=>Q.versions[y.versionKey],()=>{r()}),r(!0),(s,a)=>{var V,j,F;const A=c("a-input-search"),p=c("a-button"),L=c("a-select-option"),W=c("a-select"),U=c("a-space"),X=c("a-menu-item"),Y=c("a-menu"),Z=c("DownOutlined"),ee=c("a-dropdown"),te=c("a-skeleton"),ae=c("a-popconfirm"),le=c("a-empty"),oe=c("a-pagination");return e(),n("div",ge,[$(s.$slots,"header",B(z({tableConfig:x,filter:k.value,reload:r})),void 0,!0),g("div",{loading:D.value,class:"flex items-center p-2 bg-white rounded-xl empty:hidden"},[m(U,null,{default:d(()=>[t.globalSearch?(e(),f(A,{key:0,value:k.value.search,"onUpdate:value":a[0]||(a[0]=l=>k.value.search=l),"allow-clear":"",style:{"max-width":"300px"},placeholder:"Enter to search...",loading:D.value,onSearch:r,onKeyup:ue(r,["enter"])},null,8,["value","loading","onKeyup"])):u("",!0),t.showReload?(e(),f(p,{key:1},{icon:d(()=>[m(de(ce),{onClick:a[1]||(a[1]=l=>r(!0))})]),_:1})):u("",!0),$(s.$slots,"filter",B(z({tableConfig:x,filter:k.value,reload:r})),void 0,!0),$(s.$slots,"sort",B(z({tableConfig:x,sort:t.sort,filter:k.value,reload:r})),()=>[t.showSort?(e(),f(W,{key:0,value:R.value,"onUpdate:value":a[2]||(a[2]=l=>R.value=l),style:{width:"140px"},placeholder:"Order by...",onChange:r},{default:d(()=>[(e(!0),n(h,null,_(t.showSort,l=>(e(),f(L,{key:l.value,value:l.value},{default:d(()=>[w(C(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])):u("",!0)],!0)]),_:3}),m(U,{class:"!ml-auto"},{default:d(()=>[t.listActions.length>0?(e(!0),n(h,{key:0},_(t.listActions,l=>(e(),n(h,null,[l.ifShow?(e(),f(p,{key:0,type:"primary",onClick:()=>{l.action(r)}},{default:d(()=>[w(C(l.label),1)]),_:2},1032,["onClick"])):u("",!0)],64))),256)):u("",!0),t.selectionActions.length>0?(e(),f(ee,{key:1,disabled:!b.value.length},{overlay:d(()=>[m(Y,null,{default:d(()=>[(e(!0),n(h,null,_(t.selectionActions,(l,P)=>(e(),n(h,{key:P},[l.ifShow?(e(),f(X,{key:0,onClick:i=>J(l)},{default:d(()=>[w(C(l.title),1)]),_:2},1032,["onClick"])):u("",!0)],64))),128))]),_:1})]),default:d(()=>[m(p,null,{default:d(()=>[w(" Actions "),m(Z)]),_:1})]),_:1},8,["disabled"])):u("",!0),t.addAction&&t.addAction.ifShow?(e(),f(p,{key:2,type:"primary",onClick:a[3]||(a[3]=()=>{t.addAction.action(r)})},{default:d(()=>[w("Add")]),_:1})):u("",!0)]),_:1})],8,he),g("div",pe,[D.value?(e(),f(te,{key:0,active:"",class:"p-10"})):$(s.$slots,"table",B(I({key:1},{tableConfig:x,tableData:N.value,data:v.value,columns:t.columns,selectionActions:t.selectionActions,reload:r})),()=>{var l,P;return[((P=(l=v.value)==null?void 0:l.data)==null?void 0:P.length)!==0?(e(),n("table",ve,[g("thead",ke,[g("tr",null,[t.showSelection?(e(),n("th",be,[g("label",me,[T(g("input",{"onUpdate:modelValue":a[4]||(a[4]=i=>O.value=i),value:!0,type:"checkbox",class:"w-4 h-4 text-blue-600 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600",onChange:H},null,544),[[E,O.value]])])])):u("",!0),(e(!0),n(h,null,_(t.columns,i=>(e(),n("th",{key:i.key,scope:"col",width:i.width?i.width:"auto",class:"p-2 whitespace-nowrap"},[g("div",Ce,C(s.__(i.title)),1)],8,we))),128)),t.itemActions.length?(e(),n("th",{key:1,width:t.itemActions.length*80,scope:"col",class:"p-2 text-center whitespace-nowrap"},C(s.__("Action")),9,xe)):u("",!0)])]),g("tbody",Se,[(e(!0),n(h,null,_(v.value,(i,M)=>(e(),n("tr",{class:K({"border-b":M%2===0})},[t.showSelection?(e(),n("td",_e,[g("label",{for:"checkbox-table-search-"+i[x.item_key],class:"w-full py-4 ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"},[T(g("input",{id:i[x.item_key],"onUpdate:modelValue":a[5]||(a[5]=o=>b.value=o),value:i,type:"checkbox",class:"w-4 h-4 text-blue-600 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,Pe),[[E,b.value]])],8,Ae)])):u("",!0),(e(!0),n(h,null,_(t.columns,o=>(e(),n("td",{key:o.key,"data-label":o.title,class:K("p-2 "+(o.class?o.class:""))},[$(s.$slots,"cell["+o.key+"]",B(z({item:i,column:o,index:M})),()=>[w(C(s.$style.format[o.key]?s.$style.format[o.key](i[o.key]):i[o.key]),1)],!0)],10,$e))),128)),t.itemActions.length?(e(),n("td",Be,[(e(!0),n(h,null,_(t.itemActions,o=>(e(),n(h,null,[o.ifShow?$(s.$slots,"cellAction["+o.key+"]",B(I({key:0},{item:i,itemAction:o,actionMethod(){o.action(i,r)}})),()=>[o.confirm?(e(),f(ae,{key:0,title:"Are you sure\uFF1F",onConfirm:ne=>o.action(i,r)},{default:d(()=>[m(p,{class:K(o.class?o.class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"),type:"link"},{default:d(()=>[w(C(o.label),1)]),_:2},1032,["class"])]),_:2},1032,["onConfirm"])):u("",!0),m(p,{class:K(o.class?o.class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"),type:"link",onClick:ne=>o.action(i,r)},{default:d(()=>[w(C(o.label),1)]),_:2},1032,["class","onClick"])],!0):u("",!0)],64))),256))])):u("",!0)],2))),256))])])):u("",!0)]},!0),((j=(V=v.value)==null?void 0:V.data)==null?void 0:j.length)===0&&t.pagination.total===0?(e(),f(le,{key:2,class:"my-10",description:!1})):u("",!0)]),t.showPagination&&v.value&&((F=t.pagination)==null?void 0:F.total)>t.pagination.perPage?(e(),f(oe,{key:0,current:t.pagination.page,"onUpdate:current":a[6]||(a[6]=l=>t.pagination.page=l),pageSize:t.pagination.perPage,"onUpdate:pageSize":a[7]||(a[7]=l=>t.pagination.perPage=l),style:{height:"40px"},class:"pt-2","show-size-changer":t.showSizeChanger,total:t.pagination.total,onChange:r},{itemRender:d(({type:l,originalElement:P})=>[l==="prev"?(e(),n("a",De,"Previous")):l==="next"?(e(),n("a",Oe,"Next")):(e(),f(fe(P),{key:2}))]),_:1},8,["current","pageSize","show-size-changer","total"])):u("",!0)])}}},Re=se(ze,[["__scopeId","data-v-a545009a"]]);export{Re as D};
