import{_ as I,T as M,r as n,o as d,p as g,d as O,V as P,e as c,f as N,c as R,a as e,h as t,F as q,i as H,H as L,k as f,q as G,l as w,m,x as J,W}from"./index.a683e63c.js";/* empty css              */import{c as K}from"./jodit-vue.05e762d7.js";import{I as Q}from"./InputUploadGetPath.6754ab8e.js";import{j as X}from"./jodit.min.b5f3759b.js";import"https://cdn.jsdelivr.net/npm/surrealdb.js";function Y(i,_,k,r,u,y){const v=n("a-select");return d(),g(v,{onChange:i.handleChange,value:i.state.tags,"onUpdate:value":_[0]||(_[0]=a=>i.state.tags=a),mode:"tags","field-names":{label:"name",value:"name"},"token-separators":[","],placeholder:"Select tags",style:{width:"100%",height:"100px"},"filter-option":!1,"not-found-content":i.state.fetching?void 0:null,options:i.options},null,8,["onChange","value","not-found-content","options"])}const Z=I(M,[["render",Y]]),ie=O({__name:"Detail",props:{value:{type:Object,default:{}},visible:{type:Boolean,default:!0}},emits:["close"],setup(i,{emit:_}){const k=i;P();const r=c(!1),u=c(!1);c("1");const y=c(),v=function(){},a=N({...newModel});c(!1),async function(){r.value=!0;var s=H.currentRoute.value.params.id;if(s>0){r.value=!0;const o=await fetchDetailApi(s);Object.assign(a,o.data),r.value=!1}else r.value=!1}();const S=s=>{y.value.validate().then(()=>{createApi({...a,status:s}).then(o=>{Object.assign(a,o.data.result)})})},C=function(){k.visible=!1,_("close"),back()};return(s,o)=>{const x=n("a-button"),A=n("a-tag"),E=n("a-space"),h=n("a-card"),z=n("a-input"),p=n("a-form-item"),b=n("a-col"),D=n("a-textarea"),F=n("a-row"),U=n("a-form"),V=n("a-drawer"),$=n("a-modal");return d(),R(q,null,[e(V,{closable:!1,bodyStyle:"position:relative;display:flex;flex-direction:column;height:100vh;",onClose:C,open:i.visible,width:"90vw"},{default:t(()=>[a?(d(),g(U,J({key:0,layout:"vertical"},s.formConfig,{ref_key:"formRef",ref:y,model:a,onFinish:s.onFinish}),{default:t(()=>[e(h,{"body-style":"padding:10px;height:55px;",class:"bg-gray-50 shadow"},{default:t(()=>[e(x,{icon:L(s.ArrowLeftOutlined),class:"float-left",type:"link",onClick:C},{default:t(()=>[f(" Back to list ")]),_:1},8,["icon"]),e(E,{class:"flex items-end float-right",align:"right"},{default:t(()=>[a.status=="publish"?(d(),g(A,{key:0,color:"success"},{default:t(()=>[f("Published")]),_:1})):a.status?(d(),g(A,{key:1,color:"orange"},{default:t(()=>[f(G(a.status),1)]),_:1})):w("",!0),e(x,{onClick:o[0]||(o[0]=l=>S("draft")),loading:s.loadingDraft,type:"dashed"},{default:t(()=>[f("Save Draft")]),_:1},8,["loading"]),e(x,{onClick:o[1]||(o[1]=l=>S("publish")),loading:r.value,type:"primary"},{default:t(()=>[f("Save And Active")]),_:1},8,["loading"])]),_:1})]),_:1}),e(F,{style:{height:"calc(100% - 55px)",overflow:"auto",padding:"0"},class:"mt-5 shadow",gutter:50},{default:t(()=>[e(b,{lg:18,md:24},{default:t(()=>[e(h,null,{default:t(()=>[e(F,{gutter:20},{default:t(()=>[e(b,{span:24},{default:t(()=>[e(p,{label:"Title",name:"title",rules:[{required:!0,message:"Vui l\xF2ng nh\u1EADp t\xEAn s\u1EA3n ph\u1EA9m!"}]},{default:t(()=>[e(z,{value:a.title,"onUpdate:value":o[2]||(o[2]=l=>a.title=l),placeholder:"Title.."},null,8,["value"])]),_:1})]),_:1}),e(b,{span:24},{default:t(()=>[e(p,{label:"M\xF4 t\u1EA3"},{default:t(()=>[r.value?w("",!0):(d(),g(m(K),{key:0,style:{height:"50vh"},modelValue:a.content,"onUpdate:modelValue":o[3]||(o[3]=l=>a.content=l),config:{iframe:!0,height:"50vh",iframeStyle:"html{margin:0;padding:0;min-height: 100%;}body{box-sizing:border-box;font-family:roboto;font-size:16px;line-height:1.6;padding:10px;margin:0;background:transparent;color:#000;position:relative;z-index:2;user-select:auto;margin:0px;overflow:auto;outline:none;}table{width:100%;border:none;border-collapse:collapse;empty-cells: show;max-width: 100%;}th,td{padding: 2px 5px;border:1px solid #ccc;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}p{margin-top:0;}.jodit_editor .jodit_iframe_wrapper{display: block;clear: both;user-select: none;position: relative;}.jodit_editor .jodit_iframe_wrapper:after {position:absolute;content:'';z-index:1;top:0;left:0;right: 0;bottom: 0;cursor: pointer;display: block;background: rgba(0, 0, 0, 0);} .jodit_disabled{user-select: none;-o-user-select: none;-moz-user-select: none;-khtml-user-select: none;-webkit-user-select: none;-ms-user-select: none}",toolbarButtonSize:"large",buttons:[...m(X.exports.Jodit).defaultOptions.buttons,{name:"Select Image",tooltip:"Select Image",exec:l=>{u.value=!0,v=function(T){T.forEach(function(j){u.value=!1;const B="<img width=100% title="+j.title+" src="+j.file_url+" />";l.s.insertHTML(B)})}}}]}},null,8,["modelValue","config"]))]),_:1}),e(p,{label:"M\xF4 t\u1EA3 ng\u1EAFn"},{default:t(()=>[e(D,{value:a.excerpt,"onUpdate:value":o[4]||(o[4]=l=>a.excerpt=l),placeholder:"Excerpt...",rows:4},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(b,{lg:6,md:24},{default:t(()=>[e(h,{class:"mt-5"},{default:t(()=>[e(p,{style:{width:"100%"},label:"Feature image"},{default:t(()=>[e(m(Q),{width:"200px",autocomplete:"off",value:a.image,"onUpdate:value":o[5]||(o[5]=l=>a.image=l)},null,8,["value"])]),_:1})]),_:1}),e(h,{class:"mt-5"},{default:t(()=>[e(p,{style:{width:"100%"},label:"Tags"},{default:t(()=>[e(m(Z),{value:a.tags,"onUpdate:value":o[6]||(o[6]=l=>a.tags=l)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},16,["model","onFinish"])):w("",!0)]),_:1},8,["open"]),e($,{"append-to-body":"",open:u.value,"onUpdate:open":o[8]||(o[8]=l=>u.value=l),style:{"z-index":"99999",top:"2vh",height:"98vh"},height:"96vh",width:"90vw",title:"Select file"},{footer:t(()=>[]),default:t(()=>[e(m(W),{multiple:!0,onClose:o[7]||(o[7]=l=>u.value=!1),onSelect:v})]),_:1},8,["open"])],64)}}});export{ie as default};
