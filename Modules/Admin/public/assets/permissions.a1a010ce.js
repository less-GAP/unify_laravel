import{i as d,e as _,u as I,v as Y,r as o,p as x,h as e,o as f,a as t,m as p,ah as j,b,H as A,x as z,a5 as J,c as K,n as M,k as Q,q as W,F as X}from"./index.a683e63c.js";import{D as Z}from"./DataTable.1047e308.js";import{U as $}from"./UseEloquentRouter.7e988003.js";import{U as ee}from"./UseDataTable.106f51b0.js";import"https://cdn.jsdelivr.net/npm/surrealdb.js";const te={class:"p-5",style:{height:"calc(100% - 70px)","margin-top":"15px",overflow:"auto"},gutter:20},oe={class:"py-4"},k="roles",_e={__name:"permissions",setup(ae){const h="/master-data/"+k,u=d.currentRoute.value.params.id,v=_(),s=_({}),{fetchRelationShipApi:w,attachRelationShipApi:D,detachRelationShipApi:R,fetchDetailApi:ne,fetchListApi:le,createApi:se,deleteApi:ie,updateApi:re}=$(k),g=I(),C=ee(function(a){return w(u,"permissions",a)},{columns:[{title:"Name",key:"name"},{title:"Description",key:"description"}],listActions:[],itemActions:[{ifShow:g.hasPermission("Role.delete"),label:"Delete",key:"delete",class:"!pr-[10px] !pl-[10px] font-medium !text-red-600 !dark:text-red-500 hover:underline",confirm:!0,action(a,i){R(u,"permissions",a.id).then(c=>{}).finally(()=>{i()})}}],addAction:{action:a=>{s.id=null,r.value=!0},ifShow:g.hasPermission("Role.create")}});let m=()=>{};Y(d.currentRoute,a=>{a.path===h&&m()});function P({reload:a}){m=a}async function S(){v.value.validate().then(()=>{D(u,"permissions",s.value.id),s.value.id=null,r.value=!1,m()})}const r=_(!1),y=function(){d.replace({path:h})};return(a,i)=>{const c=o("a-button"),T=o("a-card"),U=o("a-popconfirm"),B=o("a-image"),N=o("a-select-option"),O=o("a-select"),q=o("a-form-item"),E=o("a-col"),F=o("a-row"),L=o("a-form"),V=o("a-modal"),G=o("a-drawer");return f(),x(G,{"body-style":"padding:0",closable:!1,style:{position:"relative",display:"flex","flex-direction":"column",height:"100vh"},onClose:y,open:!0,width:"70vw"},{default:e(()=>[t(T,{"body-style":"padding:10px;height:55px;",class:"bg-gray-50"},{default:e(()=>[t(c,{class:"float-left",type:"link",onClick:y},{icon:e(()=>[t(p(j))]),_:1})]),_:1}),b("div",te,[t(p(Z),z({onRegister:P},p(C)),{"cellAction[delete]":e(({item:l,actionMethod:n})=>[t(U,{title:"B\u1EA1n mu\u1ED1n x\xF3a s\u1EA3n ph\u1EA9m n\xE0y?","ok-text":"Yes","cancel-text":"No",onConfirm:n},{default:e(()=>[t(c,{type:"text",danger:"",icon:A(a.DeleteOutlined),label:"",outline:!0},null,8,["icon"])]),_:2},1032,["onConfirm"])]),"cellAction[edit]":e(({item:l,actionMethod:n})=>[t(c,{class:"mr-5",type:"text",icon:A(a.FormOutlined),label:"",outline:!0,onClick:n},null,8,["icon","onClick"])]),"cell[image]":e(({item:l,column:n})=>[t(B,{height:"50px",class:"w-20 h-auto",src:l.image,alt:l.name},null,8,["src","alt"])]),_:1},16)]),t(V,{open:r.value,"onUpdate:open":i[1]||(i[1]=l=>r.value=l),title:"Add permission",onOk:S},{default:e(()=>[t(L,{model:s.value,ref_key:"formRef",ref:v,"validate-trigger":"submit",autocomplete:"off",layout:"vertical"},{default:e(()=>[b("div",oe,[t(F,{gutter:20},{default:e(()=>[t(E,{span:24},{default:e(()=>[t(q,{name:"id",rules:[{required:!0,message:"Please select...!"}],label:"Permission"},{default:e(()=>[t(p(J),{url:"permissions/all",method:"GET",params:{"filter[status]":"active"}},{default:e(({data:l})=>[t(O,{value:s.value.id,"onUpdate:value":i[0]||(i[0]=n=>s.value.id=n),placeholder:"Select permission...","option-label-prop":"children","show-search":"",allowClear:""},{default:e(()=>[(f(!0),K(X,null,M(l,(n,H)=>(f(),x(N,{key:H,value:n.id,label:n.name},{default:e(()=>[Q(W(n.name),1)]),_:2},1032,["value","label"]))),128))]),_:2},1032,["value"])]),_:1})]),_:1},8,["rules"])]),_:1})]),_:1})])]),_:1},8,["model"])]),_:1},8,["open"])]),_:1})}}};export{_e as default};
