import{e as U,f as w,r as i,o as m,p as S,h as l,a as s,k as _,x as B,A as u,c as h,I as E,F as L,L as O,m as k,N as V,O as T,b as r,q as $,l as x,H as D,X as H,Y as N,Z as F}from"./index.a683e63c.js";import{D as R}from"./DataTable.1047e308.js";import{F as Y}from"./FormOutlined.646d2a07.js";import"https://cdn.jsdelivr.net/npm/surrealdb.js";const j={__name:"FormUser",props:{value:Object},emits:["success","cancel"],setup(C,{emit:n}){const d=C,f={required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},t=U(!1),e=w(d.value||{isNew:!0,name:"",username:"",email:""}),p=w({validateTrigger:"submit","label-align":"top",model:e,labelCol:{span:24},wrapperCol:{span:24},"validate-messages":f}),v=async function(){t.value=!0;const c=await u.post("user",e.value);n("success",c.data)},b=function(){n("cancel")};return(c,a)=>{const o=i("a-input"),g=i("a-form-item"),A=i("a-button"),q=i("a-space"),P=i("a-form");return m(),S(P,B(p,{onFinish:v}),{default:l(()=>[s(g,{name:"name",label:"Full Name",rules:[{required:!0}]},{default:l(()=>[s(o,{value:e.name,"onUpdate:value":a[0]||(a[0]=y=>e.name=y)},null,8,["value"])]),_:1}),s(g,{name:"phone",label:"Phone",rules:[{type:"phone",required:!0}]},{default:l(()=>[s(o,{value:e.phone,"onUpdate:value":a[1]||(a[1]=y=>e.phone=y)},null,8,["value"])]),_:1}),s(g,null,{default:l(()=>[s(q,null,{default:l(()=>[s(A,{loading:t.value,type:"primary","html-type":"submit"},{default:l(()=>[_("Submit")]),_:1},8,["loading"]),s(A,{onClick:b,"html-type":"button"},{default:l(()=>[_("Cancel")]),_:1})]),_:1})]),_:1})]),_:1},16)}}},z=["src","alt"],G={class:"pl-3 float-left"},I={class:"text-base font-semibold"},M={class:"font-normal text-gray-500"},X={key:0,class:"flex items-center"},Z=r("div",{class:"h-2.5 w-2.5 rounded-full bg-red-500 mr-2"},null,-1),J={key:1,class:"flex items-center"},K=r("div",{class:"h-2.5 w-2.5 rounded-full bg-green-500 mr-2"},null,-1),ae={__name:"index",setup(C){const n=U({visible:!1,value:null,success:()=>{},cancel:()=>{}});function d(t,e){n.value.visible=!0,n.value.value=t,n.value.success=e}const f={tableConfig:{sticky:!0,scroll:"{ x: 1500, y: 600 }",bordered:!0,showHeader:!0},api:t=>u.get("customer/list",{params:t}),addAction:t=>{d(null,t)},itemActions:[{label:"",class:"font-medium text-blue-600 dark:text-blue-500 hover:underline",icon:N,key:"edit",action(t,e){d(t,e)}},{label:"",class:"font-medium text-red-600 dark:text-red-500 hover:underline",icon:N,key:"delete",action(t,e){u.delete("customer/"+t.id).then(e)}}],columns:[{title:"Group",key:"customer_group_name"},{title:"Username",key:"username"},{title:"Full name",key:"name"},{title:"Email",key:"email"},{title:"Phone",key:"phone"},{title:"Active date",key:"email_verified_at"},{title:"Referral Code",key:"referral_code"},{title:"Status",key:"status"}],selectionActions:[{title:"Active",action(t){return u.post("customer/activeList",{items:t,status:"A"}).then(e=>{F[e.data.code==0?"error":"success"]({message:"Notification",description:e.data.message})})}},{title:"Deactive",action(t){return u.post("customer/activeList",{items:t,status:"D"}).then(e=>{F[e.data.code==0?"error":"success"]({message:"Notification",description:e.data.message})})}},{title:"Delete",action(t){return u.post("customer/deleteList",t)},complete(){alert("success")}}]};return(t,e)=>{var c;const p=i("a-button"),v=i("a-popconfirm"),b=i("a-modal");return m(),h(L,null,[s(E,null,{default:l(()=>[s(O,null,{default:l(()=>[s(k(R),V(T(f)),{"cell[full_name]":l(({item:a,column:o})=>[r("img",{class:"w-10 h-10 float-left rounded-full",src:a.profile_photo_url,alt:a.full_name},null,8,z),r("div",G,[r("div",I,$(a.full_name),1),r("div",M,$(a.email),1)])]),"cell[status]":l(({item:a,column:o})=>[a.status=="D"?(m(),h("div",X,[Z,_(" Deactive ")])):x("",!0),a.status=="A"?(m(),h("div",J,[K,_(" Active ")])):x("",!0)]),"cellAction[edit]":l(({item:a,actionMethod:o})=>[s(p,{type:"text",icon:D(k(Y)),label:"",outline:!0,onClick:o},null,8,["icon","onClick"])]),"cellAction[delete]":l(({item:a,actionMethod:o})=>[s(v,{title:"Are you sure delete this user?","ok-text":"Yes","cancel-text":"No",onConfirm:o},{default:l(()=>[s(p,{type:"text",danger:"",icon:D(k(H)),label:"",outline:!0},null,8,["icon"])]),_:2},1032,["onConfirm"])]),_:1},16)]),_:1})]),_:1}),s(b,{title:(c=n.value.value)!=null&&c.id?"Edit User":"Add User",footer:null,width:"800px",open:n.value.visible,"onUpdate:open":e[2]||(e[2]=a=>n.value.visible=a)},{default:l(()=>[n.value.visible?(m(),S(j,{key:0,onSuccess:e[0]||(e[0]=a=>{n.value.visible=!1,n.value.success()}),onCancel:e[1]||(e[1]=a=>n.value.visible=!1),value:n.value.value},null,8,["value"])):x("",!0)]),_:1},8,["title","open"])],64)}}};export{ae as default};
