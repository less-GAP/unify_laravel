import{_ as T}from"./no_image_available.915c4da6.js";import{d as K,a3 as de,X as Q,a4 as _e,a5 as ce,e as c,a6 as fe,t as Z,_ as ve,r,o as n,p as C,h as l,b as i,a,c as u,F as x,n as me,x as he,k as h,q as _,u as ye,I as ke,i as H,A as W,L as be,l as d,m as Y,a7 as ge,H as X,W as we,ak as J}from"./index.a683e63c.js";import{U as Se}from"./UseEloquentRouter.7e988003.js";/* empty css              */import{P as Pe,a as xe}from"./Patient.bb818edd.js";import{R as Ce}from"./RemoteSelect.5cb10285.js";import{F as O}from"./FormOutlined.646d2a07.js";const De=K({components:{DragOutlined:de,DeleteOutlined:Q,PlusOutlined:_e,ApiData:ce,RemoteSelect:Ce},props:{value:Array},emits:["select","close"],setup(v,{emit:f}){c(!1);const D=c(!1),P=c(),e=c({patient:{}});function j(){f("close")}function I(){P.value.validate().then(()=>{f("select",Z(e.value))})}function z(b,m){m&&(e.value.shipper=m,e.value.shipper_phone=m.phone,e.value.shipper_email=m.email,e.value.shipper_name=m.full_name)}return fe(()=>{e.value=v.value,e.value.shipper_phone=v.value.shipper_phone,e.value.shipper_email=v.value.shipper_email}),{loading:D,formRef:P,back:j,formState:e,submit:I,changeShipping:z}}});const $e={class:"my-4"},Ye={class:"py-4 flex justify-end"};function Ie(v,f,D,P,e,j){const I=r("a-select-option"),z=r("a-select"),b=r("ApiData"),m=r("a-form-item"),U=r("a-input"),E=r("a-col"),N=r("a-row"),F=r("a-button"),S=r("a-form");return n(),C(S,{layout:"vertical",ref:"formRef",model:v.formState,onFinish:v.submit,class:"w-full"},{default:l(()=>[i("div",$e,[a(N,{gutter:20},{default:l(()=>[a(E,{span:24},{default:l(()=>[a(m,{label:"Shipping",name:"shipping_id",rules:[{required:!0,message:"Please input !"}]},{default:l(()=>[a(b,{url:"user/all",method:"GET",params:{type:"shipper"}},{default:l(({data:y})=>[a(z,{class:"w-[200px]",value:v.formState.shipping_id,"onUpdate:value":f[0]||(f[0]=g=>v.formState.shipping_id=g),placeholder:"Select shipping...","option-label-prop":"children",onChange:v.changeShipping},{default:l(()=>[(n(!0),u(x,null,me(y,(g,q)=>(n(),C(I,he({key:q,value:g.id,label:g.name},g),{default:l(()=>[h(_(g.full_name)+" - "+_(g.phone),1)]),_:2},1040,["value","label"]))),128))]),_:2},1032,["value","onChange"])]),_:1})]),_:1}),a(m,{label:"Phone",name:"shipper_phone",rules:[{required:!0,message:"Please enter phone!"}]},{default:l(()=>[a(U,{value:v.formState.shipper_phone,"onUpdate:value":f[1]||(f[1]=y=>v.formState.shipper_phone=y),class:"w-full",placeholder:"Phone..."},null,8,["value"])]),_:1}),a(m,{label:"Email",name:"shipper_email",rules:[{type:"email",message:"The input is not valid email!"}]},{default:l(()=>[a(U,{value:v.formState.shipper_email,"onUpdate:value":f[2]||(f[2]=y=>v.formState.shipper_email=y),placeholder:"Email..."},null,8,["value"])]),_:1})]),_:1})]),_:1}),i("div",Ye,[a(F,{type:"primary","html-type":"submit"},{default:l(()=>[h("Submit")]),_:1}),a(F,{type:"primary",ghost:"",onClick:f[3]||(f[3]=y=>v.back()),class:"ml-4"},{default:l(()=>[h("Back")]),_:1})])])]),_:1},8,["model","onFinish"])}const ze=ve(De,[["render",Ie]]),Ae={class:"mx-4"},Ue={class:"flex flex-row justify-start"},Fe={class:"mt-5"},Me={key:0,class:"flex flex-row items-center"},Re=["src","alt"],je={key:1,class:"w-20 h-auto float-left",src:T},Ee={class:"ml-4 font-semibold"},Ne={key:0,class:"flex flex-row items-center"},qe=["src","alt"],Be={key:1,class:"w-20 h-auto float-left",src:T},Oe={class:"ml-4 font-semibold"},Te={key:0,class:"flex flex-row items-center"},Ve=["src","alt"],Le={key:1,class:"w-20 h-auto float-left",src:T},Ge={class:"ml-4 font-semibold"},He={class:"flex flex-row justify-start"},We={key:0,class:"flex flex-row justify-between"},Xe=i("br",null,null,-1),Je={key:0},Ke=i("br",null,null,-1),Qe={key:1},Ze={key:2},et={key:3},tt={class:"flex flex-row justify-start"},at={key:1,class:"flex flex-row justify-between"},lt=i("br",null,null,-1),st={key:0},nt=i("br",null,null,-1),ot={key:1},R="order",ft=K({__name:"Detail",setup(v){ye(),Se(R);const f=c(!1);c("1"),c(!1);const D=c(!1),P=c(),e=c({status:"new",products:[],patient:{}});(function(){f.value=!0;var t=H.currentRoute.value.params.id;t>0?(f.value=!0,W.get(R+"/"+t).then(s=>{e.value=s.data.data,f.value=!1})):f.value=!1})();const I=()=>{P.value.validate().then(()=>{if(e.value.products.length==0)return J.error("Please select product!"),!1;if(!e.value.patient_id)return J.error("Please select patient!"),!1;W.post(R,Z(e.value)).then(t=>{t.data.code==1&&(P.value.resetFields(),V())})})},z=c([{title:"#",dataIndex:"id",key:"id",width:50,render:(t,s,k)=>(++k,k)},{title:"Product",dataIndex:"product_id",key:"product_id"},{title:"Supplier",dataIndex:"supplier_id",key:"supplier_id"},{title:"Trademark",dataIndex:"trademark_id",key:"trademark_id"},{title:"Amount",dataIndex:"amount",key:"amount",className:"text-center",width:100},{title:"Action",dataIndex:"action",key:"action",width:100}]),b=c(!1),m=c({}),U=t=>{t.id?e.value.products.forEach((s,k)=>{s.id==t.id&&(e.value.products[k]=t)}):(t.id=e.value.products.length+1,e.value.products.push(t)),b.value=!1},E=()=>{m.value={},b.value=!0},N=t=>{m.value=t,b.value=!0},F=t=>{e.value.products.forEach((s,k)=>{s.id==t.id&&e.value.products.splice(k,1)})},S=c(!1),y=c({}),g=t=>{e.value.patient={unify_number:t.unify_number,full_name:t.full_name,patient_id:t.patient_id,apt:t.apt,city:t.city,phone:t.phone,email:t.email,route:t.route,state:t.state,street:t.street,sub_r:t.sub_r,zip:t.zip},e.value.apt=t.apt,e.value.city=t.city,e.value.phone=t.phone,e.value.email=t.email,e.value.patient_id=t.patient_id,e.value.route=t.route,e.value.state=t.state,e.value.street=t.street,e.value.sub_r=t.sub_r,e.value.zip=t.zip,S.value=!1},q=()=>{y.value={},S.value=!0},ee=t=>{y.value=t,S.value=!0},$=c(!1),A=c({}),te=t=>{e.value.shipper={shipping_id:t.shipping_id,shipper_phone:t.shipper_phone,shipper_email:t.shipper_email},e.value.shipper_name=t.shipper_name,e.value.shipper_phone=t.shipper_phone,e.value.shipper_email=t.shipper_email,e.value.shipping_id=t.shipping_id,$.value=!1},ae=()=>{A.value={},$.value=!0},le=t=>{A.value=t,$.value=!0},V=()=>{H.push("/"+R)};return(t,s)=>{const k=r("a-divider"),w=r("a-button"),se=r("a-popconfirm"),ne=r("a-table"),B=r("a-col"),oe=r("a-select"),L=r("a-form-item"),ue=r("a-date-picker"),G=r("a-row"),ie=r("a-space"),re=r("a-form"),M=r("a-modal");return n(),u(x,null,[a(ke,null,{default:l(()=>[a(be,null,{default:l(()=>[a(re,{layout:"vertical",ref_key:"formRef",ref:P,model:e.value,onFinish:I,class:"w-full"},{default:l(()=>[i("div",Ae,[a(G,{gutter:20},{default:l(()=>[a(B,{span:16},{default:l(()=>[a(k,{orientation:"left"},{default:l(()=>[h("Product Info")]),_:1}),i("div",Ue,[a(w,{onClick:E},{default:l(()=>[h("Add Product")]),_:1})]),i("div",Fe,[a(ne,{"data-source":e.value.products,columns:z.value,bordered:"",pagination:!1,triped:""},{bodyCell:l(({column:o,record:p})=>[o.key==="product_id"?(n(),u(x,{key:0},[p.product?(n(),u("div",Me,[p.product.image_url?(n(),u("img",{key:0,class:"w-20 h-auto float-left",src:p.product.image_url,alt:p.product.name},null,8,Re)):(n(),u("img",je)),i("label",Ee,_(p.product.name),1)])):d("",!0)],64)):d("",!0),o.key==="supplier_id"?(n(),u(x,{key:1},[p.supplier?(n(),u("div",Ne,[p.supplier.image_url?(n(),u("img",{key:0,class:"w-20 h-auto float-left",src:p.supplier.image_url,alt:p.supplier.name},null,8,qe)):(n(),u("img",Be)),i("label",Oe,_(p.supplier.name),1)])):d("",!0)],64)):d("",!0),o.key==="trademark_id"?(n(),u(x,{key:2},[p.trademark?(n(),u("div",Te,[p.trademark.image_url?(n(),u("img",{key:0,class:"w-20 h-auto float-left",src:p.trademark.image_url,alt:p.trademark.name},null,8,Ve)):(n(),u("img",Le)),i("label",Ge,_(p.trademark.name),1)])):d("",!0)],64)):d("",!0),o.key==="expiration_date"?(n(),u(x,{key:3},[h(_(Y(ge)(p.expiration_date,"YYYY-MM-DD").format("MM-DD-YYYY")),1)],64)):d("",!0),o.key==="action"?(n(),u(x,{key:4},[a(w,{type:"text",icon:X(Y(O)),label:"",outline:!0,onClick:pe=>N(p)},null,8,["icon","onClick"]),a(se,{title:"Do you want delete this?","ok-text":"Yes","cancel-text":"No",onConfirm:pe=>F(p)},{default:l(()=>[a(w,{type:"text",danger:"",icon:X(Y(Q)),label:"",outline:!0},null,8,["icon"])]),_:2},1032,["onConfirm"])],64)):d("",!0)]),_:1},8,["data-source","columns"])])]),_:1}),a(B,{span:8},{default:l(()=>[a(k,{orientation:"left"},{default:l(()=>[h("Order Info")]),_:1}),a(G,{gutter:20},{default:l(()=>[a(B,{span:24},{default:l(()=>[a(L,{label:"Status",rules:[{required:!0,message:"Please select !"}]},{default:l(()=>[a(oe,{value:e.value.status,"onUpdate:value":s[0]||(s[0]=o=>e.value.status=o),allowClear:"",class:"w-full",options:[{value:"new",label:"New"},{value:"confirmed",label:"Confirmed"},{value:"delivering",label:"Delivering"},{value:"delivered",label:"Delivered"},{value:"done",label:"Done"}]},null,8,["value"])]),_:1}),a(L,{label:"Delivery Date",name:"delivery_date",rules:[{required:!0,message:"Please input !"}]},{default:l(()=>[a(ue,{value:e.value.delivery_date,"onUpdate:value":s[1]||(s[1]=o=>e.value.delivery_date=o),"input-read-only":"","value-format":"YYYY-MM-DD",format:"MM-DD-YYYY",class:"w-[150px]"},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(k,{orientation:"left"},{default:l(()=>[h("Patient Info")]),_:1}),i("div",He,[e.value.patient_id?d("",!0):(n(),C(w,{key:0,onClick:q},{default:l(()=>[h("Add Patient")]),_:1}))]),e.value.patient_id?(n(),u("div",We,[i("div",null,[i("span",null,[i("b",null,"#"+_(e.value.patient.unify_number)+" - "+_(e.value.patient.full_name),1)]),Xe,e.value.phone?(n(),u("span",Je,_(e.value.phone),1)):d("",!0),Ke,e.value.email?(n(),u("span",Qe,_(e.value.email),1)):d("",!0),e.value.email?(n(),u("br",Ze)):d("",!0),e.value.street?(n(),u("span",et,_(e.value.street)+", "+_(e.value.city)+", "+_(e.value.state)+", "+_(e.value.zip),1)):d("",!0)]),i("div",null,[a(w,{onClick:s[2]||(s[2]=o=>ee(e.value.patient)),size:t.small},{icon:l(()=>[a(Y(O))]),_:1},8,["size"])])])):d("",!0),a(k,{orientation:"left"},{default:l(()=>[h("Shipping Info")]),_:1}),i("div",tt,[e.value.shipping_id?d("",!0):(n(),C(w,{key:0,onClick:ae},{default:l(()=>[h("Add Shipper")]),_:1}))]),e.value.shipping_id?(n(),u("div",at,[i("div",null,[i("span",null,[i("b",null,_(e.value.shipper_name),1)]),lt,e.value.shipper_phone?(n(),u("span",st,_(e.value.shipper_phone),1)):d("",!0),nt,e.value.shipper_email?(n(),u("span",ot,_(e.value.shipper_email),1)):d("",!0)]),i("div",null,[a(w,{onClick:s[3]||(s[3]=o=>le(e.value.shipper)),size:t.small},{icon:l(()=>[a(Y(O))]),_:1},8,["size"])])])):d("",!0)]),_:1})]),_:1}),a(ie,{align:"center",class:"pt-5"},{default:l(()=>[a(w,{type:"primary","html-type":"submit"},{default:l(()=>[h("Submit")]),_:1}),a(w,{type:"primary",ghost:"",onClick:s[4]||(s[4]=o=>V())},{default:l(()=>[h("Back")]),_:1})]),_:1})])]),_:1},8,["model"])]),_:1})]),_:1}),a(M,{"append-to-body":"",open:D.value,"onUpdate:open":s[6]||(s[6]=o=>D.value=o),style:{"z-index":"99999",top:"2vh",height:"98vh"},height:"96vh",width:"90vw",title:"Select file"},{footer:l(()=>[]),default:l(()=>[a(Y(we),{multiple:!0,onClose:s[5]||(s[5]=o=>D.value=!1),onSelect:t.onSelectImage},null,8,["onSelect"])]),_:1},8,["open"]),a(M,{"append-to-body":"",open:b.value,"onUpdate:open":s[8]||(s[8]=o=>b.value=o),zIndex:10,width:"40%",title:"Select Product",closable:!0,footer:null,maskClosable:!1},{default:l(()=>[(n(),C(Pe,{value:m.value,onClose:s[7]||(s[7]=o=>b.value=!1),onSelect:U,key:m.value.id?m.value:0},null,8,["value"]))]),_:1},8,["open"]),a(M,{"append-to-body":"",open:S.value,"onUpdate:open":s[10]||(s[10]=o=>S.value=o),zIndex:10,width:"60%",title:"Select Patient",closable:!0,footer:null,maskClosable:!1},{default:l(()=>[(n(),C(xe,{value:y.value,onClose:s[9]||(s[9]=o=>S.value=!1),onSelect:g,key:y.value.id?y.value:0},null,8,["value"]))]),_:1},8,["open"]),a(M,{"append-to-body":"",open:$.value,"onUpdate:open":s[12]||(s[12]=o=>$.value=o),zIndex:10,width:"40%",title:"Select Shipper",closable:!0,footer:null,maskClosable:!1},{default:l(()=>[(n(),C(ze,{value:A.value,onClose:s[11]||(s[11]=o=>$.value=!1),onSelect:te,key:A.value.id?A.value:0},null,8,["value"]))]),_:1},8,["open"])],64)}}});export{ze as S,ft as _};
