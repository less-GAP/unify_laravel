import{e as S,u as D,i as p,v as T,r as i,p as N,h as o,I as R,o as f,a as l,H as k,m as s,aa as V,X as B,b as r,q as h,c as y,n as E,k as P,F as q,x as F}from"./index.a683e63c.js";import{D as L}from"./DataTable.1047e308.js";import{U as O}from"./UseEloquentRouter.7e988003.js";import{U as $}from"./UseDataTable.106f51b0.js";import"https://cdn.jsdelivr.net/npm/surrealdb.js";const H=["src","alt"],I={class:"float-left pl-3"},X={class:"text-base font-semibold"},Y={class:"font-normal text-gray-500"},c="user",W={__name:"index",setup(j){const{fetchListApi:x,createApi:z,deleteApi:b,updateApi:g}=O(c);S(!1);const d=D(),w=$(x,{showSelection:!0,showSort:!1,showReload:!0,columns:[{title:"Type",key:"type"},{title:"Username",width:200,key:"username"},{title:"Name",key:"full_name"},{title:"Role",key:"roles"}],listActions:[],itemActions:[{ifShow:d.hasPermission("User.update"),label:"Edit",key:"edit",action:(t,u)=>{p.push(c+"/"+t.id)}},{ifShow:d.hasPermission("User.delete"),label:"Delete",key:"delete",class:"font-medium !text-red-600 dark:text-red-500 hover:underline",confirm:!0,action(t,u){b(t.id).then(m=>{}).finally(()=>{u()})}}],addAction:{action:t=>{p.push(c+"/0")},ifShow:d.hasPermission("User.create")}});let _=()=>{};T(p.currentRoute,t=>{t.path===c&&_()});function A({reload:t}){_=t}return(t,u)=>{const m=i("a-button"),v=i("a-popconfirm"),C=i("a-switch"),U=i("a-tag");return f(),N(R,null,{default:o(()=>[l(s(L),F({onRegister:A},s(w)),{"cellAction[edit]":o(({item:e,actionMethod:a})=>[l(m,{type:"text",primary:"",onClick:a,icon:k(s(V)),label:"",outline:!0},null,8,["onClick","icon"])]),"cellAction[delete]":o(({item:e,actionMethod:a})=>[l(v,{title:"Are you sure delete this user?","ok-text":"Yes","cancel-text":"No",onConfirm:a},{default:o(()=>[l(m,{type:"text",danger:"",icon:k(s(B)),label:"",outline:!0},null,8,["icon"])]),_:2},1032,["onConfirm"])]),"cell[full_name]":o(({item:e,column:a})=>[r("img",{class:"float-left w-10 h-10 rounded-full",src:e.profile_photo_url,alt:e.full_name},null,8,H),r("div",I,[r("div",X,h(e.full_name),1),r("div",Y,h(e.email),1)])]),"cell[deleted]":o(({item:e,column:a})=>[l(C,{onChange:n=>s(g)(e.id,{deleted:e.deleted}),checkedValue:"active",unCheckedValue:"inactive",checked:e.deleted,"onUpdate:checked":n=>e.deleted=n},null,8,["onChange","checked","onUpdate:checked"])]),"cell[roles]":o(({item:e,column:a})=>[(f(!0),y(q,null,E(e.roles,n=>(f(),y("div",{key:n.id},[l(U,null,{default:o(()=>[P(h(n.name),1)]),_:2},1024)]))),128))]),_:1},16)]),_:1})}}};export{W as default};
