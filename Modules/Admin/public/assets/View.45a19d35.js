import{_ as I}from"./no_image_available.915c4da6.js";import{d as K,u as Q,e as f,r as v,c as l,a as u,h as o,I as Z,F as h,i as z,A as F,o as t,L as ee,b as r,k as p,q as d,l as s,m as b,a7 as A,H as B,X as te,p as m,W as ae,ak as R,t as le}from"./index.a683e63c.js";import{U as oe}from"./UseEloquentRouter.7e988003.js";/* empty css              */import{P as se,a as ne}from"./Patient.bb818edd.js";import{F as ue}from"./FormOutlined.646d2a07.js";import"https://cdn.jsdelivr.net/npm/surrealdb.js";import"./RemoteSelect.5cb10285.js";const ie={class:"mx-4"},re={class:"mt-5"},de={key:0,class:"flex flex-row items-center"},ce=["src","alt"],pe={key:1,class:"w-20 h-auto float-left",src:I},_e={class:"ml-4 font-semibold"},fe={key:0,class:"flex flex-row items-center"},ve=["src","alt"],me={key:1,class:"w-20 h-auto float-left",src:I},he={class:"ml-4 font-semibold"},ke={key:0,class:"flex flex-row items-center"},ye=["src","alt"],be={key:1,class:"w-20 h-auto float-left",src:I},ge={class:"ml-4 font-semibold"},we=r("b",null,"Status: ",-1),xe={class:"mt-2"},Pe=r("b",null,"Delivery Date: ",-1),Ce={class:"flex flex-row justify-start"},De={key:0},Ye=r("br",null,null,-1),Se={key:0},Ie=r("br",null,null,-1),Me={key:1},$e={key:2},Ne={key:3},ze={key:1},Fe=r("br",null,null,-1),Ae={key:0},Be={key:1},Re={key:2},D="order",Xe=K({__name:"View",setup(Ue){Q(),oe(D);const g=f(!1);f("1"),f(!1);const Y=f(!1),M=f(),e=f({products:[],patient:{}});(function(){g.value=!0;var a=z.currentRoute.value.params.id;a>0?(g.value=!0,F.get(D+"/"+a).then(n=>{e.value=n.data.data,g.value=!1})):g.value=!1})();const U=()=>{M.value.validate().then(()=>{if(e.value.products.length==0)return R.error("Please select product!"),!1;if(!e.value.patient_id)return R.error("Please select patient!"),!1;F.post(D,le(e.value)).then(a=>{a.data.code==1&&$()})})},V=f([{title:"#",dataIndex:"id",key:"id",width:50,render:(a,n,_)=>(++_,_)},{title:"Product",dataIndex:"product_id",key:"product_id"},{title:"Supplier",dataIndex:"supplier_id",key:"supplier_id"},{title:"Trademark",dataIndex:"trademark_id",key:"trademark_id"},{title:"Amount",dataIndex:"amount",key:"amount",className:"text-center",width:100}]),w=f(!1),x=f({}),E=a=>{a.id?e.value.products.forEach((n,_)=>{n.id==a.id&&(e.value.products[_]=a)}):(a.id=e.value.products.length+1,e.value.products.push(a)),w.value=!1},O=a=>{x.value=a,w.value=!0},j=a=>{e.value.products.forEach((n,_)=>{n.id==a.id&&e.value.products.splice(_,1)})},k=f(!1),P=f({}),q=a=>{e.value.patient=a.patient,e.value.apt=a.apt,e.value.city=a.city,e.value.phone=a.phone,e.value.email=a.email,e.value.patient_id=a.patient_id,e.value.route=a.route,e.value.state=a.state,e.value.street=a.street,e.value.sub_r=a.sub_r,e.value.zip=a.zip,k.value=!1,console.log(e.value)},L=()=>{P.value={},k.value=!0},$=()=>{z.push("/"+D)};return(a,n)=>{const _=v("a-divider"),C=v("a-button"),T=v("a-popconfirm"),H=v("a-table"),N=v("a-col"),y=v("a-tag"),W=v("a-row"),X=v("a-space"),G=v("a-form"),S=v("a-modal");return t(),l(h,null,[u(Z,null,{default:o(()=>[u(ee,null,{default:o(()=>[u(G,{layout:"vertical",ref_key:"formRef",ref:M,model:e.value,onFinish:U,class:"w-full"},{default:o(()=>[r("div",ie,[u(W,{gutter:20},{default:o(()=>[u(N,{span:16},{default:o(()=>[u(_,{orientation:"left"},{default:o(()=>[p("Product Info")]),_:1}),r("div",re,[u(H,{"data-source":e.value.products,columns:V.value,bordered:"",pagination:!1,triped:""},{bodyCell:o(({column:c,record:i})=>[c.key==="product_id"?(t(),l(h,{key:0},[i.product?(t(),l("div",de,[i.product.image_url?(t(),l("img",{key:0,class:"w-20 h-auto float-left",src:i.product.image_url,alt:i.product.name},null,8,ce)):(t(),l("img",pe)),r("label",_e,d(i.product.name),1)])):s("",!0)],64)):s("",!0),c.key==="supplier_id"?(t(),l(h,{key:1},[i.supplier?(t(),l("div",fe,[i.supplier.image_url?(t(),l("img",{key:0,class:"w-20 h-auto float-left",src:i.supplier.image_url,alt:i.supplier.name},null,8,ve)):(t(),l("img",me)),r("label",he,d(i.supplier.name),1)])):s("",!0)],64)):s("",!0),c.key==="trademark_id"?(t(),l(h,{key:2},[i.trademark?(t(),l("div",ke,[i.trademark.image_url?(t(),l("img",{key:0,class:"w-20 h-auto float-left",src:i.trademark.image_url,alt:i.trademark.name},null,8,ye)):(t(),l("img",be)),r("label",ge,d(i.trademark.name),1)])):s("",!0)],64)):s("",!0),c.key==="expiration_date"?(t(),l(h,{key:3},[p(d(b(A)(i.expiration_date,"YYYY-MM-DD").format("MM-DD-YYYY")),1)],64)):s("",!0),c.key==="action"?(t(),l(h,{key:4},[u(C,{type:"text",icon:B(b(ue)),label:"",outline:!0,onClick:J=>O(i)},null,8,["icon","onClick"]),u(T,{title:"Do you want delete this?","ok-text":"Yes","cancel-text":"No",onConfirm:J=>j(i)},{default:o(()=>[u(C,{type:"text",danger:"",icon:B(b(te)),label:"",outline:!0},null,8,["icon"])]),_:2},1032,["onConfirm"])],64)):s("",!0)]),_:1},8,["data-source","columns"])])]),_:1}),u(N,{span:8},{default:o(()=>[u(_,{orientation:"left"},{default:o(()=>[p("Order Info")]),_:1}),r("div",null,[we,e.value.status=="new"?(t(),m(y,{key:0,color:"#2db7f5"},{default:o(()=>[p("New")]),_:1})):s("",!0),e.value.status=="confirmed"?(t(),m(y,{key:1,color:"#108ee9"},{default:o(()=>[p("Confirmed")]),_:1})):s("",!0),e.value.status=="delivering"?(t(),m(y,{key:2,color:"#87d068"},{default:o(()=>[p("Delivering")]),_:1})):s("",!0),e.value.status=="delivered"?(t(),m(y,{key:3,color:"#green"},{default:o(()=>[p("Delivered")]),_:1})):s("",!0),e.value.status=="done"?(t(),m(y,{key:4,color:"#green"},{default:o(()=>[p("Done")]),_:1})):s("",!0)]),r("div",xe,[Pe,p(" "+d(b(A)(e.value.delivery_date,"YYYY-MM-DD").format("MM-DD-YYYY")),1)]),u(_,{orientation:"left"},{default:o(()=>[p("Patient Info")]),_:1}),r("div",Ce,[e.value.patient_id?s("",!0):(t(),m(C,{key:0,onClick:L},{default:o(()=>[p("Add Patient")]),_:1}))]),e.value.patient_id?(t(),l("div",De,[r("span",null,[r("b",null,d(e.value.patient.unify_number)+" - "+d(e.value.patient.full_name),1)]),Ye,e.value.phone?(t(),l("span",Se,d(e.value.phone),1)):s("",!0),Ie,e.value.email?(t(),l("span",Me,d(e.value.email),1)):s("",!0),e.value.email?(t(),l("br",$e)):s("",!0),e.value.street?(t(),l("span",Ne,d(e.value.street)+", "+d(e.value.city)+", "+d(e.value.state)+", "+d(e.value.zip),1)):s("",!0)])):s("",!0),u(_,{orientation:"left"},{default:o(()=>[p("Shipping Info")]),_:1}),e.value.shipping_id?(t(),l("div",ze,[r("span",null,[r("b",null,d(e.value.shipper_name),1)]),Fe,e.value.shipper.phone?(t(),l("span",Ae,d(e.value.shipper_phone),1)):s("",!0),e.value.shipper_phone?(t(),l("br",Be)):s("",!0),e.value.shipper_email?(t(),l("span",Re,d(e.value.shipper_email),1)):s("",!0)])):s("",!0)]),_:1})]),_:1}),u(X,{align:"center",class:"pt-5"},{default:o(()=>[u(C,{type:"primary",ghost:"",onClick:n[0]||(n[0]=c=>$())},{default:o(()=>[p("Back")]),_:1})]),_:1})])]),_:1},8,["model"])]),_:1})]),_:1}),u(S,{"append-to-body":"",open:Y.value,"onUpdate:open":n[2]||(n[2]=c=>Y.value=c),style:{"z-index":"99999",top:"2vh",height:"98vh"},height:"96vh",width:"90vw",title:"Select file"},{footer:o(()=>[]),default:o(()=>[u(b(ae),{multiple:!0,onClose:n[1]||(n[1]=c=>Y.value=!1),onSelect:a.onSelectImage},null,8,["onSelect"])]),_:1},8,["open"]),u(S,{"append-to-body":"",open:w.value,"onUpdate:open":n[4]||(n[4]=c=>w.value=c),zIndex:10,width:"40%",title:"Select Product",closable:!0,footer:null,maskClosable:!1},{default:o(()=>[(t(),m(se,{value:x.value,onClose:n[3]||(n[3]=c=>a.showDetail=!1),onSelect:E,key:x.value.id?x.value:0},null,8,["value"]))]),_:1},8,["open"]),u(S,{"append-to-body":"",open:k.value,"onUpdate:open":n[6]||(n[6]=c=>k.value=c),zIndex:10,width:"60%",title:"Select Patient",closable:!0,footer:null,maskClosable:!1},{default:o(()=>[(t(),m(ne,{value:P.value,onClose:n[5]||(n[5]=c=>k.value=!1),onSelect:q,key:P.value.id?P.value:0},null,8,["value"]))]),_:1},8,["open"])],64)}}});export{Xe as default};
