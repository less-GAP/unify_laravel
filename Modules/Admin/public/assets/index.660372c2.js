import{e as v,u as P,i as m,v as U,r as c,c as D,a,h as o,x as S,m as s,F as V,o as F,H as _,X as T}from"./index.a683e63c.js";import{D as B}from"./DataTable.1047e308.js";import{U as E}from"./UseEloquentRouter.7e988003.js";import{U as N}from"./UseDataTable.106f51b0.js";import{F as R}from"./FormOutlined.646d2a07.js";import"https://cdn.jsdelivr.net/npm/surrealdb.js";const k="permissions",z={__name:"index",setup(O){const l="/master-data/"+k,{fetchListApi:g,createApi:$,deleteApi:x,updateApi:h}=E(k);v(!1);const r=P(),C=N(g,{columns:[{title:"Name",key:"name"},{title:"Description",key:"description"},{title:"Status",key:"status",width:100},{title:"Created at",key:"created_at",width:200}],listActions:[],itemActions:[{ifShow:r.hasPermission("Permission.update"),label:"Edit",key:"edit",action:(t,u)=>{m.push(l+"/"+t.id)}},{ifShow:r.hasPermission("Permission.delete"),label:"Delete",key:"delete",class:"font-medium !text-red-600 !dark:text-red-500 hover:underline",confirm:!0,action(t,u){x(t.id).then(d=>{}).finally(()=>{u()})}}],addAction:{action:t=>{m.push(l+"/new")},ifShow:r.hasPermission("Permission.create")}});let p=()=>{};U(m.currentRoute,t=>{t.path===l&&p()});function w({reload:t}){p=t}return(t,u)=>{const d=c("a-button"),b=c("a-popconfirm"),y=c("a-image"),f=c("a-switch"),A=c("router-view");return F(),D(V,null,[a(s(B),S({onRegister:w},s(C)),{"cellAction[delete]":o(({item:e,actionMethod:n})=>[a(b,{title:"B\u1EA1n mu\u1ED1n x\xF3a s\u1EA3n ph\u1EA9m n\xE0y?","ok-text":"Yes","cancel-text":"No",onConfirm:n},{default:o(()=>[a(d,{type:"text",danger:"",icon:_(s(T)),label:"",outline:!0},null,8,["icon"])]),_:2},1032,["onConfirm"])]),"cellAction[edit]":o(({item:e,actionMethod:n})=>[a(d,{class:"mr-5",type:"text",icon:_(s(R)),label:"",outline:!0,onClick:n},null,8,["icon","onClick"])]),"cell[image]":o(({item:e,column:n})=>[a(y,{height:"50px",class:"w-20 h-auto",src:e.image,alt:e.name},null,8,["src","alt"])]),"cell[status]":o(({item:e,column:n})=>[a(f,{onChange:i=>s(h)(e.id,{status:e.status}),checkedValue:"active",unCheckedValue:"inactive",checked:e.status,"onUpdate:checked":i=>e.status=i},null,8,["onChange","checked","onUpdate:checked"])]),"cell[is_default]":o(({item:e,column:n})=>[a(f,{onChange:i=>s(h)(e.id,{is_default:e.is_default}),checkedValue:1,unCheckedValue:0,checked:e.is_default,"onUpdate:checked":i=>e.is_default=i},null,8,["onChange","checked","onUpdate:checked"])]),_:1},16),a(A)],64)}}};export{z as default};
